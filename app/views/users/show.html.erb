<%= render "shared/header" %>

<div class="users-show">
<div class="AccountPage">
  <div class="AccountPage__title">
    <h1>マイページ</h1>
  </div>

  <%# エラーメッセージがある場合 %>
  <% if @messages %>
    <%# エラーメッセージの表示 %>
    <% @messages.each do |message| %>
      <p class="user-show-errors"><%= message %></p>
    <% end %>
  <% end %>

  <div class="Card__title">
    <h2>カード情報<h2>
  </div>
  <div class="Card_info">
    【カード番号】
    <br>
    <%= "**** **** **** " + @card[:last4] %>
    <%# カード番号の下4桁を取得 %>

    <br>
    【有効期限】
    <br>
    <%= @card[:exp_month] %>
    <%# 有効期限の「月」を取得 %>
    /
    <%= @card[:exp_year] %>
    <%# 有効期限の「年」を取得 %>
  </div>
  <div class="Account__info">
    <h2>ユーザー情報</h2>
  </div>
  <div class="AccountPage__form">
    <%= form_for(current_user) do |f| %>
      <div class="FormField">
        <div class="FormField__name">
          <%= f.label :nickname %>
        </div>
        <div class="FormField__name">
          <%= f.text_field :nickname, autofocus: true %>
        </div>
      </div>
      <div class="FormField">
        <div class="FormField__email">
          <%= f.label :email %>
        </div>
        <div class="FormField__email">
          <%= f.email_field :email %>
        </div>
      </div>
      <div class="FormField">
        <div class="FormField__password">
          <%= f.label :password %>
          <p class="password-comment">＊更新のためにパスワードを入力してください</p>
        </div>
        <div class="FormField__password">
          <%= f.password_field :password %>
        </div>
        <br>
      </div>
      <%= f.submit "更新する" %>
    <% end %>
    <h3 class="user-cancel user-edit-title">アカウント削除</h3>
    <%= button_to "アカウント削除", registration_path(current_user), data: { confirm: "Are you sure?" }, method: :delete %>
  </div>
</div>
</div>

<%= render "shared/footer" %>